import{defineComponent as t,computed as e,mergeProps as n,unref as r,h as o,getCurrentInstance as i,toRaw as a,reactive as u,watch as l,resolveComponent as s,defineAsyncComponent as d,Text as p,Comment as c,useSSRContext as m}from"vue";import{E as v,W as f,d as y}from"../_/nitro.mjs";import{find as b,html as g}from"property-information";import{o as h}from"./node-Co_CclnQ.mjs";import{ssrRenderComponent as j}from"vue/server-renderer";import{v as _}from"./preview-C8Om5VAN.mjs";import"unified";import"remark-parse";import"remark-rehype";import"remark-mdc";import"remark-gfm";import"rehype-external-links";import"rehype-sort-attribute-values";import"rehype-sort-attributes";import"rehype-raw";import"detab";import"micromark-util-sanitize-uri";import"hast-util-to-string";import"github-slugger";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"node:path";import"node:crypto";import"./server.mjs";import"vue-router";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";const k=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],w="default",x=/^@|^v-on:/,O=/^:|^v-bind:/,R=/^v-model/,D=["select","textarea","input"],C=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(t=>[t,`prose-${t}`])),$=t({name:"MDCRenderer",props:{body:{type:Object,required:!0},data:{type:Object,default:()=>({})},class:{type:[String,Object],default:void 0},tag:{type:[String,Boolean],default:void 0},prose:{type:Boolean,default:void 0},components:{type:Object,default:()=>({})},unwrap:{type:[Boolean,String],default:!1}},async setup(t){var n,r,o,s,d,p,c,m;const v=null==(o=null==(r=null==(n=i())?void 0:n.appContext)?void 0:r.app)?void 0:o.$nuxt,f=(null==v?void 0:v.$route)||(null==v?void 0:v._route),{mdc:y}=(null==(s=null==v?void 0:v.$config)?void 0:s.public)||{},b={...(null==(d=null==y?void 0:y.components)?void 0:d.prose)&&!1!==t.prose?C:{},...(null==(p=null==y?void 0:y.components)?void 0:p.map)||{},...a((null==(m=null==(c=t.data)?void 0:c.mdc)?void 0:m.components)||{}),...t.components},g=e(()=>{var e;const n=((null==(e=t.body)?void 0:e.children)||[]).map(t=>t.tag||t.type).filter(t=>!k.includes(t));return Array.from(new Set(n)).sort().join(".")}),h=u({...t.data});return l(()=>t.data,t=>{Object.assign(h,t)}),await async function(t,e){if(!t)return;const n=Array.from(new Set(function o2(t,e){const n=t.tag;if("text"===t.type||"binding"===n||"comment"===t.type)return[];const r=A(t,e.tags),o=[];"root"===t.type||k.includes(r)||o.push(r);for(const n of t.children||[])o.push(...o2(n,e));return o}(t,e)));await Promise.all(n.map(async t=>{if((null==t?void 0:t.render)||(null==t?void 0:t.ssrRender)||(null==t?void 0:t.__ssrInlineRender))return;const e=M(t);(null==e?void 0:e.__asyncLoader)&&!e.__asyncResolved&&await e.__asyncLoader()}))}(t.body,{tags:b}),{tags:b,contentKey:g,route:f,runtimeData:h,updateRuntimeData:function(t,e){const n=t.split(".").length-1;return t.split(".").reduce((t,r,o)=>o==n&&t?(t[r]=e,t[r]):"object"==typeof t?t[r]:void 0,h)}}},render(t){var e,n;const{tags:r,tag:i,body:a,data:u,contentKey:l,route:s,unwrap:d,runtimeData:p,updateRuntimeData:c}=t;if(!a)return null;const m={...u,tags:r,$route:s,runtimeData:p,updateRuntimeData:c},v=!1!==i?M(i||(null==(e=m.component)?void 0:e.name)||m.component||"div"):void 0;return v?o(v,{...null==(n=m.component)?void 0:n.props,class:t.class,...this.$attrs,key:l},{default:l2}):null==l2?void 0:l2();function l2(){return d?h(S(a,o,m,m).default(),"string"==typeof d?d.split(" "):["*"]):S(a,o,m,m).default()}}});function S(t,e,n,r){const o=(t.children||[]).reduce((t,e)=>{if("template"!==e.tag)return t[w].push(e),t;const n=function(t){let e="";for(const n of Object.keys(t.props||{}))if(n.startsWith("#")||n.startsWith("v-slot:")){e=n.split(/[:#]/,2)[1];break}return e||w}(e);return t[n]=t[n]||[],"element"===e.type&&t[n].push(...e.children||[]),t},{[w]:[]}),i=Object.entries(o).reduce((t,[o,i])=>i.length?(t[o]=()=>function(t){const e=[];for(const n of t){const t=e[e.length-1];n.type===p&&(null==t?void 0:t.type)===p?t.children=t.children+n.children:e.push(n)}return e}(i.map(t=>function(t,e,n,r={}){if("text"===t.type)return e(p,t.value);if("comment"===t.type)return e(c,null,t.value);const o=t.tag,i=A(t,n.tags);if("binding"===t.tag)return function(t,e,n,r={}){var o,i,a;const u={...n.runtimeData,...r,$document:n,$doc:n},l=(null==(o=t.props)?void 0:o.value.trim().split(/\.|\[(\d+)\]/).filter(Boolean)).reduce((t,e)=>{if(t&&e in t)return"function"==typeof t[e]?t[e]():t[e]},u),s=null==(i=t.props)?void 0:i.defaultValue;return e(p,null!=(a=null!=l?l:s)?a:"")}(t,e,n,r);const a=M(i);"object"==typeof a&&(a.tag=o);const u=function(t,e){const{tag:n="",props:r={}}=t;return Object.keys(r).reduce(function(t,o){if("__ignoreMap"===o)return t;const i=r[o];if(R.test(o))return function(t,e,n,r,{native:o}){var i;const a=(null==(i=t.match(/^v-model:([^=]+)/))?void 0:i[1])||"modelValue",u=o?"onInput":`onUpdate:${a}`;return n[o?"value":a]=q(e,r.runtimeData),n[u]=t=>{var n;r.updateRuntimeData(e,o?null==(n=t.target)?void 0:n.value:t)},n}(o,i,t,e,{native:D.includes(n)});if("v-bind"===o)return function(t,e,n,r){const o=q(e,r);return Object.assign(n,o)}(0,i,t,e);if(x.test(o))return u=i,l=t,s=e,a=(a=o).replace(x,""),l.on=l.on||{},l.on[a]=()=>q(u,s),l;var a,u,l,s;if(O.test(o))return function(t,e,n,r){return n[t=t.replace(O,"")]=q(e,r),n}(o,i,t,e);const{attribute:d}=b(g,o);return Array.isArray(i)&&i.every(t=>"string"==typeof t)?(t[d]=i.join(" "),t):(t[d]=i,t)},{})}(t,n);return e(a,u,S(t,e,n,{...r,...u}))}(t,e,n,r))),t):t,{});return i}const M=t=>{if("string"==typeof t){if(k.includes(t))return t;const e=s(v(t),!1);return t&&"AsyncComponentWrapper"!==(null==e?void 0:e.name)?"string"==typeof e?e:"setup"in e?d(()=>new Promise(t=>t(e))):e:e}return t};function q(t,e){const n=t.split(".").reduce((t,e)=>"object"==typeof t?t[e]:void 0,e);return void 0===n?y(t):n}function A(t,e){var n;const r=t.tag;return r&&void 0===(null==(n=t.props)?void 0:n.__ignoreMap)&&(e[r]||e[v(r)]||e[f(t.tag)])||r}const B=$.setup;$.setup=(t,e)=>{const n=m();return(n.modules||(n.modules=new Set)).add("node_modules/@nuxtjs/mdc/dist/runtime/components/MDCRenderer.vue"),B?B(t,e):void 0};const W=t({__name:"ContentRendererMarkdown",__ssrInlineRender:!0,props:{value:{type:Object,required:!0},excerpt:{type:Boolean,default:!1},tag:{type:String,default:"div"},components:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})}},setup(t){const o=t,i=_().isEnabled(),a=e(()=>{let t=o.value.body||o.value;return o.excerpt&&o.value.excerpt&&(t=o.value.excerpt),t}),u=e(()=>{const{body:t,excerpt:e,...n}=o.value;return{...n,...o.data}}),l=e(()=>({...o.components,...u.value._components||{}}));return(e,o,s,d)=>{o(j($,n({body:a.value,data:u.value,tag:t.tag,components:l.value,"data-content-id":r(i)?t.value._id:void 0},d),null,s))}}}),E=W.setup;W.setup=(t,e)=>{const n=m();return(n.modules||(n.modules=new Set)).add("node_modules/@nuxt/content/dist/runtime/components/ContentRendererMarkdown.vue"),E?E(t,e):void 0};export{W as default};
//# sourceMappingURL=ContentRendererMarkdown-CavIU9o6.mjs.map
