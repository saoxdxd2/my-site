import{a as t}from"./path-meta.mjs";import{u as e}from"./nitro.mjs";import"slugify";import"unified";import"remark-parse";import"remark-rehype";import"remark-mdc";import"remark-gfm";import"rehype-external-links";import"rehype-sort-attribute-values";import"rehype-sort-attributes";import"rehype-raw";import"detab";import"micromark-util-sanitize-uri";import"hast-util-to-string";import"github-slugger";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"node:path";import"node:crypto";function createNav(i,r){const{navigation:o}=e().public.content;if(!1===o)return[];const pickNavigationFields=t=>{return{...(i=["title",...o.fields],t=>(t=t||{},i&&i.length?i.filter(e=>void 0!==t[e]).reduce((e,i)=>Object.assign(e,{[i]:t[i]}),{}):t))(t),...(e=t?.navigation,"[object Object]"===Object.prototype.toString.call(e)?t.navigation:{})};var e,i};return sortAndClear(i.sort((t,e)=>t._path.localeCompare(e._path)).reduce((e,i)=>{const o=i._path.substring(1).split("/"),n=i._id.split(":").slice(1),a=!!n[n.length-1]?.match(/([1-9][0-9]*\.)?index.md/g),getNavItem=t=>({title:t.title,_path:t._path,_file:t._file,children:[],...pickNavigationFields(t),...t._draft?{_draft:!0}:{}}),p=getNavItem(i);if(a){const t=r[p._path];if(void 0!==t?.navigation&&!t?.navigation)return e;if("/"!==i._path){const t=getNavItem(i);p.children.push(t)}t&&Object.assign(p,pickNavigationFields(t))}if(1===o.length)return e.push(p),e;return o.slice(0,-1).reduce((e,n,a)=>{const p="/"+o.slice(0,a+1).join("/"),l=r[p];if(void 0!==l?.navigation&&!l.navigation)return[];let s=e.find(t=>t._path===p);return s||(s={title:t(n),_path:p,_file:i._file,children:[],...l&&pickNavigationFields(l)},e.push(s)),s.children},e).push(p),e},[]))}const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function sortAndClear(t){t.forEach(t=>{t._file=t._file.split(".").slice(0,-1).join(".")});const e=t.sort((t,e)=>i.compare(t._file,e._file));for(const t of e)t.children?.length?sortAndClear(t.children):delete t.children,delete t._file;return t}export{createNav};
//# sourceMappingURL=navigation.mjs.map
