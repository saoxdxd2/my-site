import{hash as e}from"C:/Users/sao/Documents/my-site/node_modules/ohash/dist/index.mjs";import{defineComponent as t,useSlots as s,h as o,toRefs as r,computed as i,watch as u,useSSRContext as d}from"vue";import{u as n}from"./asyncData-B7xdkuq0.js";import{q as a}from"./query-Dj9UOrgE.js";import{b as m}from"../server.mjs";import"C:/Users/sao/Documents/my-site/node_modules/nuxt/node_modules/perfect-debounce/dist/index.mjs";import"./client-only-1stTJUAi.js";import"C:/Users/sao/Documents/my-site/node_modules/hookable/dist/index.mjs";import"C:/Users/sao/Documents/my-site/node_modules/ufo/dist/index.mjs";import"C:/Users/sao/Documents/my-site/node_modules/klona/dist/index.mjs";import"./preview-C8Om5VAN.js";import"C:/Users/sao/Documents/my-site/node_modules/nuxt/node_modules/cookie-es/dist/index.mjs";import"C:/Users/sao/Documents/my-site/node_modules/h3/dist/index.mjs";import"C:/Users/sao/Documents/my-site/node_modules/destr/dist/index.mjs";import"C:/Users/sao/Documents/my-site/node_modules/nuxt/node_modules/ohash/dist/index.mjs";import"ofetch";import"#internal/nuxt/paths";import"C:/Users/sao/Documents/my-site/node_modules/unctx/dist/index.mjs";import"vue-router";import"C:/Users/sao/Documents/my-site/node_modules/radix3/dist/index.mjs";import"C:/Users/sao/Documents/my-site/node_modules/defu/dist/defu.mjs";import"vue/server-renderer";import"C:/Users/sao/Documents/my-site/node_modules/@unhead/vue/dist/index.mjs";const l=t({name:"ContentQuery",props:{path:{type:String,required:!1,default:void 0},only:{type:Array,required:!1,default:void 0},without:{type:Array,required:!1,default:void 0},where:{type:Object,required:!1,default:void 0},sort:{type:Object,required:!1,default:void 0},limit:{type:Number,required:!1,default:void 0},skip:{type:Number,required:!1,default:void 0},locale:{type:String,required:!1,default:void 0},find:{type:String,required:!1,default:void 0}},async setup(t){const{path:s,only:o,without:d,where:l,sort:p,limit:f,skip:y,locale:v,find:c}=r(t),h=i(()=>s.value?.includes("/_")),_=!m().public.content.experimental.advanceQuery;u(()=>t,()=>w(),{deep:!0});const x=e=>_?e?.surround?e.surround:e?._id||Array.isArray(e)?e:e?.result:e.result,{data:j,refresh:w}=await n(`content-query-${e(t)}`,()=>{let e;return e=s.value?a(s.value):a(),o.value&&(e=e.only(o.value)),d.value&&(e=e.without(d.value)),l.value&&(e=e.where(l.value)),p.value&&(e=e.sort(p.value)),f.value&&(e=e.limit(f.value)),y.value&&(e=e.skip(y.value)),v.value&&(e=e.where({_locale:v.value})),"one"===c.value?e.findOne().then(x):"surround"===c.value&&s.value?_?e.findSurround(s.value):e.withSurround(s.value).findOne().then(x):e.find().then(x)});return{isPartial:h,data:j,refresh:w}},render(e){const t=s(),{data:r,refresh:i,isPartial:u,path:d,only:n,without:a,where:m,sort:l,limit:p,skip:f,locale:y,find:v}=e,c={path:d,only:n,without:a,where:m,sort:l,limit:p,skip:f,locale:y,find:v};if("one"===c.find){if(!r&&t?.["not-found"])return t["not-found"]({props:c,...this.$attrs});if(t?.empty&&"markdown"===r?._type&&!r?.body?.children.length)return t.empty({props:c,...this.$attrs})}else if((!r||!r.length)&&t?.["not-found"])return t["not-found"]({props:c,...this.$attrs});if(t?.default)return t.default({data:r,refresh:i,isPartial:u,props:c,...this.$attrs});return h="default",_={data:r,props:c,isPartial:u},o("pre",null,JSON.stringify({message:"You should use slots with <ContentQuery>!",slot:h,data:_},null,2));var h,_}}),p=l.setup;l.setup=(e,t)=>{const s=d();return(s.modules||(s.modules=new Set)).add("node_modules/@nuxt/content/dist/runtime/components/ContentQuery.vue"),p?p(e,t):void 0};export{l as default};
//# sourceMappingURL=ContentQuery-DsWfmzyM.js.map
