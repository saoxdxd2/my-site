import{computed as e,toValue as a,ref as t,shallowRef as r,toRef as n,nextTick as s,unref as u,getCurrentInstance as l,onServerPrefetch as o}from"file://C:/Users/sao/Documents/my-site/node_modules/vue/index.mjs";import{debounce as c}from"file://C:/Users/sao/Documents/my-site/node_modules/nuxt/node_modules/perfect-debounce/dist/index.mjs";import{e as i,f as d,d as y}from"./server.mjs";function f(...D){var h;const g="string"==typeof D[D.length-1]?D.pop():void 0;var P,x;P=D[0],x=D[1],!("string"==typeof P||"object"==typeof P&&null!==P||"function"==typeof P&&"function"==typeof x)&&D.unshift(g);let[C,w,k={}]=D;const b=e(()=>a(C));if("string"!=typeof b.value)throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if("function"!=typeof w)throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const j=i();null!=k.server||(k.server=!0),null!=k.default||(k.default=_),null!=k.getCachedData||(k.getCachedData=m),null!=k.lazy||(k.lazy=!1),null!=k.immediate||(k.immediate=!0),null!=k.deep||(k.deep=d.deep),null!=k.dedupe||(k.dedupe="cancel"),k._functionName,j._asyncData[b.value];const V={cause:"initial",dedupe:k.dedupe};if((null==(h=j._asyncData[b.value])?void 0:h._init)||(V.cachedData=k.getCachedData(b.value,j,{cause:"initial"}),j._asyncData[b.value]=function(e,a,l,o,i){var D,h;null!=(D=e.payload._errors)[a]||(D[a]=d.errorValue);const g=o.getCachedData!==m,P=(null==(h=e.ssrContext)?void 0:h._sharedPrerenderCache)?()=>{const t=e.ssrContext._sharedPrerenderCache.get(a);if(t)return t;const r=Promise.resolve().then(()=>e.runWithContext(()=>l(e)));return e.ssrContext._sharedPrerenderCache.set(a,r),r}:l,x=o.deep?t:r,C=null!=i,w=e.hook("app:data:refresh",async e=>{e&&!e.includes(a)||await k.execute({cause:"refresh:hook"})}),k={data:x(C?i:o.default()),pending:r(!C),error:n(e.payload._errors,a),status:r("idle"),execute:(...t)=>{var r,n;const[s,l]=t,c=s&&void 0===l&&"object"==typeof s?s:{};if(e._asyncDataPromises[a]){if("defer"===(i=null!=(r=c.dedupe)?r:o.dedupe)||!1===i)return e._asyncDataPromises[a];e._asyncDataPromises[a].cancelled=!0}var i;if("initial"===c.cause||e.isHydrating){const t="cachedData"in c?c.cachedData:o.getCachedData(a,e,{cause:null!=(n=c.cause)?n:"refresh:manual"});if(null!=t)return e.payload.data[a]=k.data.value=t,k.error.value=d.errorValue,k.status.value="success",Promise.resolve(t)}k.pending.value=!0,k.status.value="pending";const D=new Promise((a,t)=>{try{a(P(e))}catch(e){t(e)}}).then(async t=>{if(D.cancelled)return e._asyncDataPromises[a];let r=t;o.transform&&(r=await o.transform(t)),o.pick&&(r=function(e,a){const t={};for(const r of a)t[r]=e[r];return t}(r,o.pick)),e.payload.data[a]=r,k.data.value=r,k.error.value=d.errorValue,k.status.value="success"}).catch(t=>{if(D.cancelled)return e._asyncDataPromises[a];k.error.value=y(t),k.data.value=u(o.default()),k.status.value="error"}).finally(()=>{D.cancelled||(k.pending.value=!1,delete e._asyncDataPromises[a])});return e._asyncDataPromises[a]=D,e._asyncDataPromises[a]},_execute:c((...e)=>k.execute(...e),0,{leading:!0}),_default:o.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{var t;w(),(null==(t=e._asyncData[a])?void 0:t._init)&&(e._asyncData[a]._init=!1),g||s(()=>{var t;(null==(t=e._asyncData[a])?void 0:t._init)||(p(e,a),k.execute=()=>Promise.resolve(),k.data.value=d.value)})}};return k}(j,b.value,w,k,V.cachedData)),j._asyncData[b.value]._deps++,!1!==k.server&&j.payload.serverRendered&&k.immediate){const e=j._asyncData[b.value].execute(V);l()?o(()=>e):j.hook("app:created",async()=>{await e})}const z={data:v(()=>{var e;return null==(e=j._asyncData[b.value])?void 0:e.data}),pending:v(()=>{var e;return null==(e=j._asyncData[b.value])?void 0:e.pending}),status:v(()=>{var e;return null==(e=j._asyncData[b.value])?void 0:e.status}),error:v(()=>{var e;return null==(e=j._asyncData[b.value])?void 0:e.error}),refresh:(...e)=>j._asyncData[b.value].execute(...e),execute:(...e)=>j._asyncData[b.value].execute(...e),clear:()=>p(j,b.value)},A=Promise.resolve(j._asyncDataPromises[b.value]).then(()=>z);return Object.assign(A,z),A}function v(a){return e({get:()=>{var e;return null==(e=a())?void 0:e.value},set(e){const t=a();t&&(t.value=e)}})}function p(e,a){a in e.payload.data&&(e.payload.data[a]=void 0),a in e.payload._errors&&(e.payload._errors[a]=d.errorValue),e._asyncData[a]&&(e._asyncData[a].data.value=void 0,e._asyncData[a].error.value=d.errorValue,e._asyncData[a].pending.value=!1,e._asyncData[a].status.value="idle"),a in e._asyncDataPromises&&(e._asyncDataPromises[a]&&(e._asyncDataPromises[a].cancelled=!0),e._asyncDataPromises[a]=void 0)}const _=()=>d.value,m=(e,a,t)=>a.isHydrating?a.payload.data[e]:"refresh:manual"!==t.cause&&"refresh:hook"!==t.cause?a.static.data[e]:void 0;export{f};
//# sourceMappingURL=asyncData-B7xdkuq0.mjs.map
